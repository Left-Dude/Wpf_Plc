<UserControl x:Class="Wpf_Plc.PlcInfoCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Wpf_Plc"
             mc:Ignorable="d" Height="396" Width="1315">
    
    <UserControl.Resources>
        <local:BoolToYesNoConverter x:Key="BoolConverter"/>
        <local:ConnectionTypesConverter x:Key="ConnectionConverter"/>
        <local:PowerSupplyTypeConverter x:Key="PowerSupplyConverter"/>
    </UserControl.Resources>
    
    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <!-- Прозрачность от 0 до 1 -->
                    <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                      From="0" To="1" Duration="0:0:1.0"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </UserControl.Triggers>
    
    

    <!-- Border с анимацией при наведении -->
    <Border x:Name="CardBorder" Background="White" CornerRadius="5" Padding="10">
        <StackPanel>
            <!-- Стиль для всех TextBlock внутри -->
            <StackPanel.Resources>
                <Style TargetType="TextBlock">
                    <Setter Property="Foreground" Value="Black"/>
                    <Setter Property="FontFamily" Value="DM sans"/>
                </Style>
            </StackPanel.Resources>

            <!-- Заголовок: Производитель + Модель -->
            <TextBlock FontSize="24" FontWeight="Bold" Margin="0,0,0,5">
                <Run Text="{Binding Manufacturer}"/>
                <Run Text=" "/>
                <Run Text="{Binding Model}"/>
            </TextBlock>

            <!-- Количество входов/выходов -->
            <TextBlock Margin="0,10,0,0" FontSize="16">
                <Run Text="• ЦИФРОВЫЕ ВХОДЫ: "/>
                <Run Text="{Binding DigitalInputsCount}"/>
            </TextBlock>
            
            <TextBlock Margin="0,5,0,0" FontSize="16">
                <Run Text="• ЦИФРОВЫЕ ВЫХОДЫ: "/>
                <Run Text="{Binding DigitalOutputsCount}"/>
            </TextBlock>
            
            <TextBlock Margin="0,5,0,0" FontSize="16">
                <Run Text="• АНАЛОГОВЫЕ ВХОДЫ: "/>
                <Run Text="{Binding AnalogInputsCount}"/>
            </TextBlock>
            
            <TextBlock Margin="0,5,0,0" FontSize="16">
                <Run Text="• АНАЛОГОВЫЕ ВЫХОДЫ: "/>
                <Run Text="{Binding AnalogOutputsCount}"/>
            </TextBlock>
            
            <!-- Платы расширений -->
            <TextBlock Margin="0,5,0,0" FontSize="16">
                <Run Text="• ПЛАТЫ РАСШИРЕНИЙ: "/>
                <Run Text="{Binding SupportsExpansionModules, Converter={StaticResource BoolConverter}}"/>
            </TextBlock>
            
            <!-- Питание -->
            <TextBlock Margin="0,5,0,0" FontSize="16">
                <Run Text="• ТИП ПИТАНИЯ: "/>
                <Run Text="{Binding PowerSupplyType, Converter={StaticResource PowerSupplyConverter}}"/>
            </TextBlock>
            
            <TextBlock Margin="0,5,0,0" FontSize="16">
                <Run Text="• ПОТРЕБЛЯЕМАЯ МОЩНОСТЬ: "/>
                <Run Text="{Binding PowerConsumption}"/>
                <Run Text=" Вт"/>
            </TextBlock>
            
            <!-- Ссылка -->
            <TextBlock Margin="0,5,0,0" FontSize="16">
                <Run Text="• ССЫЛКА: "/>
                <Hyperlink NavigateUri="{Binding ManufacturerURL}" 
                           RequestNavigate="Hyperlink_RequestNavigate">
                    <Run Text="{Binding ManufacturerURL}"/>
                </Hyperlink>
            </TextBlock>
            
            <!-- Типы соединения -->
            <TextBlock Margin="0,5,0,0" FontSize="16">
                <Run Text="• ПОДДЕРЖИВАЕМЫЕ СОЕДИНЕНИЯ: "/>
            </TextBlock>
            
            <ItemsControl ItemsSource="{Binding Converter={StaticResource ConnectionConverter}}"
                          Margin="20,5,0,0">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}" FontSize="16" Margin="0,0,10,0"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
            
            <Button Content="ЗАГРУЗИТЬ ПРОГРАММУ"
                HorizontalAlignment="Left"
                VerticalAlignment="Bottom"
                Margin="0,15,0,0"
                Width="200"
                Height="40"
                Background="#DDDDDD"
                Foreground="Black"
                FontFamily="DM sans" 
                FontSize="14"
                FontWeight="Bold"
                BorderBrush="Transparent"
                Click="LoadProgramButton_Click"/>
        </StackPanel>
        
        

        <!-- Анимация при наведении мыши -->
        <Border.Style>
            <Style TargetType="Border">
                <!-- Установка начального эффекта -->
                <Setter Property="Effect">
                    <Setter.Value>
                        <DropShadowEffect Opacity="0" BlurRadius="0" ShadowDepth="0" Direction="90"/>
                    </Setter.Value>
                </Setter>

                <!-- Анимация при наведении -->
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <!-- Изменение отступов -->
                                    <ThicknessAnimation Storyboard.TargetProperty="Margin"
                                                         From="0" To="10,0,10,0"
                                                         Duration="0:0:0.3"/>

                                    <!-- Прозрачность фона -->
                                    <DoubleAnimation Storyboard.TargetProperty="Background.Opacity"
                                                      From="1.0" To="0.95"
                                                      Duration="0:0:0.2"/>

                                    <!-- Анимация появления тени -->
                                    <DoubleAnimation Storyboard.TargetProperty="Effect.(DropShadowEffect.Opacity)"
                                                      To="0.4"
                                                      Duration="0:0:0.3"/>
                                    <DoubleAnimation Storyboard.TargetProperty="Effect.(DropShadowEffect.BlurRadius)"
                                                      To="10"
                                                      Duration="0:0:0.3"/>
                                    <DoubleAnimation Storyboard.TargetProperty="Effect.(DropShadowEffect.ShadowDepth)"
                                                      To="5"
                                                      Duration="0:0:0.3"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>

                        <!-- Обратная анимация при уходе курсора -->
                        <Trigger.ExitActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ThicknessAnimation Storyboard.TargetProperty="Margin"
                                                         From="10,0,10,0" To="0"
                                                         Duration="0:0:0.3"/>
                                    <DoubleAnimation Storyboard.TargetProperty="Background.Opacity"
                                                      From="0.95" To="1.0"
                                                      Duration="0:0:0.2"/>
                                    <DoubleAnimation Storyboard.TargetProperty="Effect.(DropShadowEffect.Opacity)"
                                                      To="0"
                                                      Duration="0:0:0.3"/>
                                    <DoubleAnimation Storyboard.TargetProperty="Effect.(DropShadowEffect.BlurRadius)"
                                                      To="0"
                                                      Duration="0:0:0.3"/>
                                    <DoubleAnimation Storyboard.TargetProperty="Effect.(DropShadowEffect.ShadowDepth)"
                                                      To="0"
                                                      Duration="0:0:0.3"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.ExitActions>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Border.Style>
    </Border>
    
</UserControl>