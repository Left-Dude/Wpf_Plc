<UserControl x:Class="Wpf_Plc.ProgramView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:Wpf_Plc"
             mc:Ignorable="d"
             Background="White"
             d:DesignHeight="800" d:DesignWidth="1200">

    <UserControl.Resources>
        <local:BoolToYesNoConverter        x:Key="BoolToYesNoConverter"/>
        <local:ConnectionTypesConverter    x:Key="ConnectionTypesConverter"/>
        <local:PowerSupplyTypeConverter    x:Key="PowerSupplyTypeConverter"/>
        <local:FileSizeConverter           x:Key="FileSizeConverter"/>
        <local:FileTypeConverter           x:Key="FileTypeConverter"/>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Левая панель меню -->
        <StackPanel Grid.Column="0" Background="#1400AA">
            <TextBlock Text="МЕНЮ" Foreground="White" Padding="10" FontFamily="DM Sans" FontWeight="Bold" HorizontalAlignment="Center"/>
            <Border Background="#1400AA" Padding="10" Margin="0,10,0,0" HorizontalAlignment="Left">
                <TextBlock Text="ПРОГРАММЫ" Foreground="White" FontFamily="DM Sans" FontWeight="Bold"/>
            </Border>
            <Button Content="PLC" Click="BtnPLC_Click" Foreground="White" FontFamily="DM Sans" FontWeight="Bold" Background="Transparent" BorderBrush="Transparent" Padding="10" Margin="0,10,0,0" HorizontalAlignment="Left"/>
            <Button Content="ВЫХОД" Click="BtnEXIT_Click" Foreground="White" FontFamily="DM Sans" FontWeight="Bold" Background="Transparent" BorderBrush="Transparent" Padding="10" Margin="0,10,0,0" HorizontalAlignment="Left"/>
            
            <TextBlock Text="Доступные программы:" Foreground="White" Padding="10,20,10,5" FontFamily="DM Sans"/>
            <ListBox x:Name="ProgramsListBox" 
                     ItemsSource="{Binding PLCPrograms}"
                     DisplayMemberPath="Name"
                     SelectedItem="{Binding SelectedProgram}"
                     Background="Transparent"
                     Foreground="White"
                     BorderThickness="0"
                     Margin="10,0,10,10"/>
        </StackPanel>

        <!-- Правая часть с деталями программы -->
        <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="40,20,40,40" Background="White">
                <TextBlock Text="{Binding SelectedProgram.Name}" 
                           Foreground="Black" 
                           FontFamily="DM Sans" 
                           FontWeight="Bold"
                           FontSize="24"
                           Margin="0,0,0,20"
                           HorizontalAlignment="Center"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                        <TextBlock Text="ИНФОРМАЦИЯ О ПРОГРАММЕ" 
                                   Foreground="#1400AA" 
                                   FontFamily="DM Sans" 
                                   FontWeight="Bold"
                                   FontSize="16"
                                   Margin="0,0,0,10"/>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="Оригинальное имя файла:" 
                                       FontFamily="DM Sans" 
                                       FontWeight="SemiBold"
                                       Width="200"/>
                            <TextBlock Text="{Binding SelectedProgram.OriginalFileName}" 
                                       FontFamily="DM Sans"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="Размер файла:" 
                                       FontFamily="DM Sans" 
                                       FontWeight="SemiBold"
                                       Width="200"/>
                            <TextBlock Text="{Binding SelectedProgram.SizeBytes,
                                                      Converter={StaticResource FileSizeConverter}}" 
                                       FontFamily="DM Sans"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="Тип файла:" 
                                       FontFamily="DM Sans" 
                                       FontWeight="SemiBold"
                                       Width="200"/>
                            <TextBlock Text="{Binding SelectedProgram.FileExtension,
                                                      Converter={StaticResource FileTypeConverter}}" 
                                       FontFamily="DM Sans"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="Для контроллера:" 
                                       FontFamily="DM Sans" 
                                       FontWeight="SemiBold"
                                       Width="200"/>
                            <TextBlock Text="{Binding SelectedProgram.PLCModel.Manufacturer}" 
                                       FontFamily="DM Sans"/>
                            <TextBlock Text="{Binding SelectedProgram.PLCModel.Model}" 
                                       FontFamily="DM Sans"
                                       Margin="5,0,0,0"/>
                        </StackPanel>
                    </StackPanel>

                    <Image Grid.Column="1" 
                           Source="assets/schema_traffic_lights.png" 
                           Stretch="Uniform"
                           Width="300"
                           HorizontalAlignment="Right"/>
                </Grid>

                <Rectangle Height="1" Fill="#CCCCCC" HorizontalAlignment="Stretch" Margin="0,20,0,20"/>

                <TextBlock Text="НАСТРОЙКИ ЗАГРУЗКИ" 
                           Foreground="#1400AA" 
                           FontFamily="DM Sans" 
                           FontWeight="Bold"
                           FontSize="16"
                           Margin="0,0,0,10"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="1"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" VerticalAlignment="Top" Margin="0,0,20,0">
                        <TextBlock Text="Параметры загрузки:" 
                                   FontFamily="DM Sans" 
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,10"/>
                        
                        <CheckBox Content="Сохранить данные памяти" 
                                  FontFamily="DM Sans" 
                                  Margin="0,5"/>
                        <CheckBox Content="Проверить контрольные суммы" 
                                  FontFamily="DM Sans" 
                                  Margin="0,5"/>
                        <CheckBox Content="Автозапуск после загрузки" 
                                  FontFamily="DM Sans" 
                                  Margin="0,5"/>
                    </StackPanel>

                    <Rectangle Grid.Column="1" Width="1" Fill="#CCCCCC" Margin="10,0"/>

                    <StackPanel Grid.Column="2" Orientation="Vertical" HorizontalAlignment="Right" Margin="20,0,0,0">
                        <TextBlock Text="Тип соединения:" 
                                   FontFamily="DM Sans" 
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,10"/>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                            <CheckBox x:Name="RsCheckBox" Content="RS" 
                                      FontFamily="DM Sans" 
                                      FontWeight="Bold" 
                                      FontSize="14" 
                                      Margin="0,0,20,0"/>
                            <CheckBox x:Name="EthernetCheckBox" Content="ETHERNET" 
                                      FontFamily="DM Sans" 
                                      FontWeight="Bold" 
                                      FontSize="14"/>
                        </StackPanel>

                        <Button Content="ЗАГРУЗИТЬ" 
                                Width="180" 
                                Height="40" 
                                HorizontalAlignment="Right"
                                Background="#1400AA" 
                                Foreground="White" 
                                FontFamily="DM Sans" 
                                FontWeight="Bold"
                                BorderThickness="0"
                                Click="LoadButton_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="20">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
